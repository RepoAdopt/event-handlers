metadata:
  name: change-owner
  labels:
    nuclio.io/project-name: repoadopt
spec:
  description: shit.
  handler: "main:handler"
  runtime: "python:3.6"
  env:
    - name: mongo_url
      value: "mongodb://192.168.178.124/"
    - name: mongo_port
      value: "27017"
    - name: db_name
      value: RepoAdopt
  resources: {}
  minReplicas: 1
  maxReplicas: 1
  triggers:
    default-http:
      class: ""
      kind: http
      name: default-http
      maxWorkers: 1
      attributes:
        cors:
          enabled: true
          allowOrigins:
            - "*"
          allowHeaders:
            - "Accept"
            - "Content-Length"
            - "Content-Type"
            - "X-nuclio-log-level"
            - "Authorization"
          allowMethods:
            - "GET"
            - "HEAD"
            - "POST"
            - "PATCH"
          allowCredentials: false
          preflightMaxAgeSeconds: 3600
  version: 1
  build:
    functionSourceCode: I0NvcHlyaWdodCAyMDE3IFRoZSBOdWNsaW8gQXV0aG9ycy4KIwojIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwojIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KIyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKIwojICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgpmcm9tIHJlcXVlc3RzIGltcG9ydCBwb3N0CmZyb20gbW9uZ29lbmdpbmUgaW1wb3J0IGNvbm5lY3QKZnJvbSBvcyBpbXBvcnQgZ2V0ZW52CgoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgb3duZXIgPSBldmVudC5ib2R5LmdldCgib3duZXIiKQogICAgcmVwbyA9IGV2ZW50LmJvZHkuZ2V0KCJyZXBvIikKICAgIG5ld19vd25lciA9IGV2ZW50LmJvZHkuZ2V0KCJuZXdfb3duZXIiKQogICAgYWNjZXNzX3Rva2VuID0gZXZlbnQuaGVhZGVycy5nZXQoJ0F1dGhvcml6YXRpb24nKS5zcGxpdCgiICIpWzFdCgogICAgaGVhZGVycz0geydBY2NlcHQnOiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi52Mytqc29uJywgIkF1dGhvcml6YXRpb24iOiBmInRva2VuIHthY2Nlc3NfdG9rZW59In0KCiAgICAKCiAgICBib2R5ID0geyJuZXdfb3duZXIiOm5ld19vd25lcn0KICAgIHRyYW5zZmVyX3Jlc3BvbnNlID0gcG9zdChmImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mve293bmVyfS97cmVwb30vdHJhbnNmZXIiLCBqc29uPWJvZHksIGhlYWRlcnM9aGVhZGVycykKCiAgICBpZiB0cmFuc2Zlcl9yZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgY29ubmVjdChnZXRlbnYoImRiX25hbWUiKSwgaG9zdD1nZXRlbnYoIm1vbmdvX3VybCIpLCBwb3J0PWludChnZXRlbnYoIm1vbmdvX3BvcnQiKSksIGFsaWFzPSJkZWZhdWx0IikKICAgICAgICBBZG9wdGFibGUub2JqZWN0cyhvd25lcj1vd25lciwgcmVwb3NpdG9yeT1mIntvd25lcn0ve3JlcG99IikudXBkYXRlKG5ld19vd25lcj1uZXdfb3duZXIpCgogICAgcmV0dXJuIGNvbnRleHQuUmVzcG9uc2UoYm9keT1mJ3t0cmFuc2Zlcl9yZXNwb25zZS50ZXh0fScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPSd0ZXh0L3BsYWluJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPXRyYW5zZmVyX3Jlc3BvbnNlLnN0YXR1c19jb2RlKQoKCgpmcm9tIG1vbmdvZW5naW5lIGltcG9ydCBEb2N1bWVudApmcm9tIG1vbmdvZW5naW5lLmZpZWxkcyBpbXBvcnQgU3RyaW5nRmllbGQKCgpjbGFzcyBBZG9wdGFibGUoRG9jdW1lbnQpOgogICAgbWV0YSA9IHsKICAgICAgICAiY29sbGVjdGlvbiI6ICJhZG9wdGFibGVzIiwKICAgICAgICAiaW5kZXhlcyI6IFt7ImZpZWxkcyI6ICgicmVwb3NpdG9yeSIsICJvd25lciIpLCAidW5pcXVlIjogVHJ1ZX1dLAogICAgfQogICAgcmVwb3NpdG9yeSA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPVRydWUpCiAgICBkZXNjcmlwdGlvbiA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPUZhbHNlKQogICAgb3duZXIgPSBTdHJpbmdGaWVsZChyZXF1aXJlZD1UcnVlKQogICAgbmV3X293bmVyID0gU3RyaW5nRmllbGQocmVxdWlyZWQ9RmFsc2UpCg==
    commands:
      - 'pip install requests'
      - 'pip install mongoengine'
    runtimeAttributes:
      repositories: []
    codeEntryType: sourceCode
    timestamp: 1622453181
  loggerSinks:
    - level: debug
  platform: {}
  readinessTimeoutSeconds: 60
  securityContext: {}
  eventTimeout: ""
