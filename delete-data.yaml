metadata:
  name: delete-data
  labels:
    nuclio.io/project-name: repoadopt
spec:
  handler: "main:handler"
  runtime: "python:3.6"
  env:
    - name: mongo_url
      value: "mongodb://192.168.178.124/"
    - name: mongo_port
      value: "27017"
    - name: db_name
      value: RepoAdopt
  resources: {}
  triggers:
    default-http:
      class: ""
      kind: http
      name: default-http
      maxWorkers: 1
      attributes:
        cors:
          allowCredentials: false
          allowHeaders:
            - 'authorization,content-type'
          allowMethods:
            - POST
          enabled: true
          preflightMaxAgeSeconds: 3600
        port: 9701
  version: 1
  build:
    functionSourceCode: I0NvcHlyaWdodCAyMDE3IFRoZSBOdWNsaW8gQXV0aG9ycy4NCiMNCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQojIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQojDQojICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KIw0KIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQojIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KZnJvbSByZXF1ZXN0cyBpbXBvcnQgcG9zdA0KZnJvbSBtb25nb2VuZ2luZSBpbXBvcnQgY29ubmVjdA0KZnJvbSBvcyBpbXBvcnQgZ2V0ZW52DQppbXBvcnQgYmFzZTY0DQppbXBvcnQganNvbg0KDQoNCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToNCiAgICBtZXNzYWdlID0ganNvbi5sb2FkcyhiYXNlNjQudXJsc2FmZV9iNjRkZWNvZGUoZXZlbnQuaGVhZGVycy5nZXQoIkF1dGhvcml6YXRpb24iKS5zcGxpdCgiLiIpWzFdKyAnPT0nKSkNCiAgICANCiAgICBjb25uZWN0KGdldGVudigiZGJfbmFtZSIpLCBob3N0PWdldGVudigibW9uZ29fdXJsIiksIHBvcnQ9aW50KGdldGVudigibW9uZ29fcG9ydCIpKSwgYWxpYXM9ImRlZmF1bHQiKQ0KDQogICAgYWRvcHRhYmxlcyA9IEFkb3B0YWJsZS5vYmplY3RzKG93bmVyPW1lc3NhZ2UuZ2V0KCd1c2VybmFtZScpKQ0KICAgIGZvciBhZG9wdGFibGUgaW4gYWRvcHRhYmxlczoNCg0KICAgICAgICAjIERlbGV0ZSBhZG9wdGFibGUgbWF0Y2hlcw0KICAgICAgICBhZG9wdGFibGVfbWF0Y2ggPSBNYXRjaC5vYmplY3RzKGFkb3B0YWJsZT1hZG9wdGFibGUuaWQpDQogICAgICAgIGZvciBtYXRjaCBpbiBhZG9wdGFibGVfbWF0Y2g6DQogICAgICAgICAgICBtYXRjaC5kZWxldGUoKQ0KICAgICAgICANCiAgICAgICAgIyBEZWxldGUgY2hhdA0KICAgICAgICBhZG9wdGFibGVfY2hhdCA9IENoYXQub2JqZWN0cyhhZG9wdGFibGU9YWRvcHRhYmxlKQ0KICAgICAgICBmb3IgY2hhdCBpbiBhZG9wdGFibGVfY2hhdDoNCiAgICAgICAgDQogICAgICAgICAgICAjIERlbGV0ZSBjaGF0bWVzc2FnZXMNCiAgICAgICAgICAgIGNoYXRtZXNzYWdlcyA9IENoYXRNZXNzYWdlLm9iamVjdHMoY2hhdF9pZD1jaGF0LmlkKQ0KICAgICAgICAgICAgZm9yIGNoYXRtZXNzYWdlIGluIGNoYXRtZXNzYWdlczoNCiAgICAgICAgICAgICAgICBjaGF0bWVzc2FnZS5kZWxldGUoKQ0KICAgICAgICAgICAgY2hhdC5kZWxldGUoKQ0KDQogICAgICAgICMgRGVsZXRlIGFkb3B0YWJsZQ0KICAgICAgICBhZG9wdGFibGUuZGVsZXRlKCkNCg0KDQogICAgbWF0Y2hlcyA9IE1hdGNoLm9iamVjdHModXNlcj1tZXNzYWdlLmdldCgndXNlcm5hbWUnKSkNCiAgICBmb3IgbWF0Y2ggaW4gbWF0Y2hlczoNCiAgICAgICAgbWF0Y2guZGVsZXRlKCkNCg0KICAgIG1lc3NhZ2VzID0gQ2hhdE1lc3NhZ2Uub2JqZWN0cyh1c2VyPW1lc3NhZ2UuZ2V0KCd1c2VybmFtZScpKQ0KICAgIGZvciBtZXNzYWdlIGluIG1lc3NhZ2VzOg0KICAgICAgICBtZXNzYWdlLnVwZGF0ZSh1c2VyPSJkZWxldGVkIikNCiAgICANCiAgICByZXR1cm4gY29udGV4dC5SZXNwb25zZShib2R5PScnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9e30sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPSd0ZXh0L3BsYWluJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfY29kZT0yMDQpDQoNCg0KZnJvbSBtb25nb2VuZ2luZSBpbXBvcnQgRG9jdW1lbnQNCmZyb20gbW9uZ29lbmdpbmUuZmllbGRzIGltcG9ydCBTdHJpbmdGaWVsZCwgRGF0ZVRpbWVGaWVsZCwgT2JqZWN0SWRGaWVsZCwgUmVmZXJlbmNlRmllbGQNCg0KDQpjbGFzcyBBZG9wdGFibGUoRG9jdW1lbnQpOg0KICAgIG1ldGEgPSB7DQogICAgICAgICJjb2xsZWN0aW9uIjogImFkb3B0YWJsZXMiLA0KICAgICAgICAiaW5kZXhlcyI6IFt7ImZpZWxkcyI6ICgicmVwb3NpdG9yeSIsICJvd25lciIpLCAidW5pcXVlIjogVHJ1ZX1dLA0KICAgIH0NCiAgICByZXBvc2l0b3J5ID0gU3RyaW5nRmllbGQocmVxdWlyZWQ9VHJ1ZSkNCiAgICBkZXNjcmlwdGlvbiA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPUZhbHNlKQ0KICAgIG93bmVyID0gU3RyaW5nRmllbGQocmVxdWlyZWQ9VHJ1ZSkNCiAgICBuZXdfb3duZXIgPSBTdHJpbmdGaWVsZChyZXF1aXJlZD1GYWxzZSkNCg0KDQpjbGFzcyBDaGF0KERvY3VtZW50KToNCiAgICBtZXRhID0geyJjb2xsZWN0aW9uIjogImNoYXRzIn0NCg0KICAgIGFkb3B0YWJsZSA9IFJlZmVyZW5jZUZpZWxkKEFkb3B0YWJsZSkNCg0KDQpjbGFzcyBDaGF0TWVzc2FnZShEb2N1bWVudCk6DQogICAgbWV0YSA9IHsiY29sbGVjdGlvbiI6ICJjaGF0bWVzc2FnZXMifQ0KDQogICAgdXNlciA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPVRydWUpDQogICAgbWVzc2FnZSA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPVRydWUpDQogICAgdGltZXN0YW1wID0gRGF0ZVRpbWVGaWVsZChyZXF1aXJlZD1GYWxzZSkNCiAgICBjaGF0X2lkID0gT2JqZWN0SWRGaWVsZChyZXF1aXJlZD1UcnVlKQ0KDQoNCmNsYXNzIE1hdGNoKERvY3VtZW50KToNCiAgICBtZXRhID0gew0KICAgICAgICAiY29sbGVjdGlvbiI6ICJtYXRjaGVzIiwNCiAgICAgICAgImluZGV4ZXMiOiBbeyJmaWVsZHMiOiAoImFkb3B0YWJsZSIsICJ1c2VyIiksICJ1bmlxdWUiOiBUcnVlfV0sDQogICAgfQ0KDQogICAgdXNlciA9IFN0cmluZ0ZpZWxkKHJlcXVpcmVkPVRydWUpDQogICAgYWRvcHRhYmxlID0gUmVmZXJlbmNlRmllbGQoQWRvcHRhYmxlKQ0K
    commands:
      - 'pip install requests'
      - 'pip install mongoengine'
      - 'pip install PyJWT'
    runtimeAttributes:
      repositories: []
    codeEntryType: sourceCode
    timestamp: 1622628498
  loggerSinks:
    - level: debug
  platform: {}
  securityContext: {}
  eventTimeout: ""
